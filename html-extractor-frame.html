<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>HTML Extractor Frame</title>
</head>
<body>
  <script>
    window.addEventListener("message", (event) => {
      try {
        const data = event.data;
        if (data && data.type === "getOuterHTML" && data.selector) {
          const el = window.parent.document.querySelector(data.selector);
          if (el) {
            const html = el.outerHTML;
            event.source.postMessage({
              type: "outerHTML",
              selector: data.selector,
              html: html
            }, "*");
          } else {
            event.source.postMessage({
              type: "outerHTML",
              selector: data.selector,
              html: "<!-- Selector not found -->"
            }, "*");
          }
        }
      } catch (err) {
        console.error("Extractor frame error:", err);
      }
    });

    console.log("Extractor frame ready...");
  </script>
  <p>Extractor frame ready...</p>
</body>
</html>
